var a=document.querySelector("video");async function b(){var A=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1}),_=document.querySelector(".loading");a.srcObject=A;await a.play();_.classList.add("hide")}async function c(){var A=new BarcodeDetector();window.setInterval(async ()=>{var _=await A.detect(a);if(_.length<=0)return;window.location.href="products/"+_[0].rawValue},2000)}export{c as barcodeDetector};window.location.pathname=="/scanner"&&(b(),c());"serviceWorker"in navigator&&(console.log("service worker supported!"),window.addEventListener("load",()=>navigator.serviceWorker.register("service-worker.js").then(A=>{console.log("registration",A);return A.update()}).catch(error=>console.log(error))));
